# H2020 SAUCE Project

Development of web based tools intended to animate secondary (or background) 3D virtual agents (where quantity is more important than quality) in real time, by giving them a behaviour that makes them aware of their surroundings and can navigate in a scenery semi-autonomously. Also we want to achieve behaviors that differs from the rest of the entities even though the action is the same, giving some personality, taking into account character properties, and finally having a realistic background scene, populated with each person behaving uniquely. The advantage of this tool is that the artists do not have to worry about the individual behavior of each secondary agent, as it is automatically managed by our AI generated by an hybrid approach of Behavior Trees. Also, this behaviors will become reusable once they are created, as other artists may want to generate similar scenarios or they do not want to start from zero and want to have a base behavior to continue developing theirs. 

The application can be tested on this [link](https://webglstudio.org/users/dmoreno/projects/saucemedusa/). It is continuously growing and changing. By now, it is not connected to any repository, but in the future it will. Also it is not perfectly improved, so the performance can be damaged if the number of agents increases. 

This tool allows to generate graphically the Hybrid Behaviour Trees which will control all the virtual characters in the scene. The interface can be divided into three main sections: 

- The navigation menu, where agents can be created, scene options can be tweaked and other tools like polulate the scene, reset the simulation, save the current scene & behaviour or load new ones.
- The visualization section, where a 3D canvas represents the scenario an the virtual agents. It is allowed to interact with this scene adding Interest Points, agents, selecting them to debug and check the individual properties and behaviour.
- The Hybrid Behaviour Tree editor

The interaction with the editor is intuitive, as nodes can be added by dragging properties, right clicking and selecting the desired node, or double clicking and searching the concrete node. 

The different nodes available are: 

- **Root**: Acts like a common Selector
- **Selector**: Evaluates the child branches one by one until one succeeds
- **Sequencer**: Evaluates the child branches one by one until all of them succeed
- **Conditional**: Receives a property value and succeeds if the condition (dynamicaly modifiable inside the widgets) is met
- **BoolConditional**: Same than the Conditional with bool properties
- **InTarget**: Checks if the agent evaluated is in the set up target
- **LineOfSight**: Checks if the agent evaluated can see a concrete position in the scenario
- **HBTProperty**: These are the nodes created when agent or scene properties are dropped in the editor. Just contains the value of the property dragged and dropped
- **EQS-NIP**: Environment Query System -  Nearest Interest Point. Computes the nearest interest point of a concrete type for each agent and outputs the position of it
- **MoveTo**: Sets the target property of the agent evaluated to a value received (left input)
- **LookAt**: Sets the look_at property of the agent evaluated to a value received (left input)
- **SimpleAnimate**: Determines which animation has to be reproduced and the motion and speed parameters
- **FindNextTarget**: Computes the following waypoint of each agent
- **Wait**: (on refactor)


Once the HBT is created, if you want to save yout work, go to Scene > Save, and download the behaviour. To continue your work, drop the file on the 3D canvas. 
